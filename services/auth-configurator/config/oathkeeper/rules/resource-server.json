[
  {
    "id": "resources:oathkeeper:rules:resource-server-oathkeeper",
    "upstream": {
      "url": "http://users:10001"
    },
    "match": {
      "url": "http://localhost:4455/users/<.*>",
      "methods": [
        "GET"
      ]
    },
    "authenticators": [
      {
        "handler": "oauth2_introspection",
        "config": {
          "required_scope": ["scope-a", "scope-b"]
        }
      },
      {
        "handler": "anonymous"
      }
    ],
    "authorizer": {
      "handler": "allow"
    },
    "credentials_issuer": {
        "handler": "headers",
        "config": {
            "headers": {
                "X-User": "{{ print .Subject }}"
            }
        }
    }
  }
]
